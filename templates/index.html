<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>ADK Wellness Lookup</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}" />
    <script defer src="{{ url_for('static', filename='app.js') }}"></script>
  </head>
  <body>
    <main class="shell">
      <header>
        <h1>Wellness Companion</h1>
        <p>Powered by ADK + Gemini Â· SQLite backed profile lookup</p>
      </header>

      <section class="card" id="lookup-card">
        <h2>Who are you?</h2>
        <form id="username-form">
          <label for="username">User name</label>
          <div class="inline-field">
            <input id="username" name="username" type="text" placeholder="alex" required />
            <button type="submit">Look up</button>
          </div>
        </form>
        <p class="helper">Try <strong>alex</strong> or <strong>jordan</strong> to see seeded data.</p>
      </section>

      <section class="card hidden" id="details-card">
        <h2 id="details-title">Tell us more</h2>
        <p id="details-description">We could not find that username. Share a few quick details to create a plan.</p>
        <form id="details-form">
          <input type="hidden" id="details-username" name="username" />
          <div class="grid">
            <label>
              Age
              <input type="number" name="age" min="1" required />
            </label>
            <label>
              Height (inches)
              <input type="number" name="height" min="1" required />
            </label>
            <label>
              Weight (lbs)
              <input type="number" name="weight" min="1" required />
            </label>
            <label>
              Exercise minutes
              <input type="number" name="exercise_minutes" min="0" required />
            </label>
            <label>
              Intensity
              <input type="text" name="intensity" placeholder="low / moderate / high" required />
            </label>
            <label>
              Mood
              <input type="text" name="mood" />
            </label>
            <label>
              Injury Restrictions
              <input type="text" name="restrictions" placeholder="knee injury, back pain..." />
            </label>
            <label>
              Goals
              <input type="text" name="goals" placeholder="Train for 5K" />
            </label>
            <label>
              Daily goal (optional)
              <input type="text" name="daily_goal" />
            </label>
          </div>
          <div class="actions">
            <button type="submit" id="details-submit-btn">Save profile</button>
            <button type="button" id="cancel-details" class="secondary">Cancel</button>
          </div>
        </form>
      </section>

      <section class="card hidden" id="result-card">
        <h2>Profile</h2>
        <pre id="user-json"></pre>
        <article id="summary"></article>
        <div class="actions" style="margin-top: 1rem;">
          <button type="button" id="edit-profile-btn" class="secondary">Edit Profile</button>
          <button type="button" id="generate-workout-btn" class="primary">Generate Workout Plan</button>
        </div>
      </section>

      <section class="card hidden" id="workout-card">
        <h2>Personalized Workout Plan</h2>
        <p class="helper">Generated from Kaggle gym exercise dataset based on your profile</p>
        <article id="workout-plan"></article>
        <div id="workout-customize-section" style="margin-top: 1.5rem; padding-top: 1.5rem; border-top: 1px solid rgba(255, 255, 255, 0.1);">
          <h3 style="margin-bottom: 0.5rem; font-size: 1rem;">Refine Your Plan</h3>
          <p class="helper" style="margin-bottom: 0.75rem; font-size: 0.875rem;">Add more requirements or modify the plan. The AI will remember previous context.</p>
          <form id="workout-refine-form" style="display: flex; gap: 0.5rem; align-items: flex-start;">
            <textarea 
              id="workout-additional-requirements" 
              name="additional_requirements"
              placeholder="e.g., focus more on upper body, add cardio, reduce intensity, include stretching..."
              rows="3"
              style="flex: 1; padding: 0.5rem; border-radius: 0.375rem; border: 1px solid rgba(255, 255, 255, 0.2); background: rgba(15, 23, 42, 0.7); color: #f1f5f9; font-family: inherit; font-size: 0.875rem; resize: vertical;"
            ></textarea>
            <button type="submit" id="refine-workout-btn" class="primary" style="align-self: flex-end; white-space: nowrap;">Refine Plan</button>
          </form>
        </div>
        <div class="actions" style="margin-top: 1rem;">
          <button type="button" id="close-workout-btn" class="secondary">Close</button>
        </div>
      </section>

      <section id="toast" class="hidden"></section>
    </main>
  </body>
</html>

